"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.create_command_procedure = void 0;
const create_command_promise_1 = require("./create_command_promise");
const sequence_1 = require("../sequence");
const create_command_procedure = (execution_handler) => {
    return ($cr, $qr) => {
        return {
            'execute': (parameters, error_transformer) => {
                return (0, create_command_promise_1.__create_command_promise)({
                    'execute': (on_success, on_error) => {
                        (0, sequence_1.__sequence)(execution_handler(parameters, $cr, $qr)).__start(on_success, ($) => {
                            on_error(error_transformer($));
                        });
                    }
                });
            },
        };
    };
};
exports.create_command_procedure = create_command_procedure;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX2NvbW1hbmRfcHJvY2VkdXJlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1hbmQvY3JlYXRlcnMvY3JlYXRlX2NvbW1hbmRfcHJvY2VkdXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUlBLHFFQUFtRTtBQUNuRSwwQ0FBd0M7QUFHakMsTUFBTSx3QkFBd0IsR0FBRyxDQUNwQyxpQkFJeUIsRUFDbUQsRUFBRTtJQUM5RSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ2hCLE9BQU87WUFDSCxTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsRUFBRTtnQkFDekMsT0FBTyxJQUFBLGlEQUF3QixFQUFDO29CQUM1QixTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLEVBQUU7d0JBRWhDLElBQUEscUJBQVUsRUFBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN2RCxVQUFVLEVBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBRTs0QkFDRixRQUFRLENBQ0osaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQ3ZCLENBQUE7d0JBQ0wsQ0FBQyxDQUNKLENBQUE7b0JBQ0wsQ0FBQztpQkFDSixDQUFDLENBQUE7WUFDTixDQUFDO1NBQ0osQ0FBQTtJQUNMLENBQUMsQ0FBQTtBQUNMLENBQUMsQ0FBQTtBQTFCWSxRQUFBLHdCQUF3Qiw0QkEwQnBDIn0=